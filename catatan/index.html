<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Catatan</title>
  <style>
    /* Tombol tambah di kanan bawah */
    #tambahCatatanBtn {
      position: fixed;
      right: 24px;
      bottom: 24px;
      background: #2196f3;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 64px;
      height: 64px;
      font-size: 32px;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      z-index: 100;
    }
    /* Modal */
    #modalCatatan {
      display: none;
      position: fixed;
      left: 0; top: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 101;
      justify-content: center;
      align-items: center;
    }
    #modalCatatan .modal-content {
      background: #fff;
      padding: 24px;
      border-radius: 8px;
      min-width: 320px;
      max-width: 90vw;
    }
    #catatanList {
      margin: 24px 0;
    }
    .catatan-item {
      background: #f7f7f7;
      margin-bottom: 16px;
      border-radius: 8px;
      padding: 16px;
    }
    .catatan-item img, .catatan-item video {
      max-width: 100%;
      height: auto;
      display: block;
      margin-top: 8px;
    }
    .catatan-item a {
      word-break: break-all;
    }
  </style>
</head>
<body>
  <!-- Tombol tambah catatan -->
  <button id="tambahCatatanBtn" title="Tambah Catatan">+</button>

  <!-- Modal Form Catatan -->
  <div id="modalCatatan">
    <div class="modal-content">
      <h2>Buat Catatan Baru</h2>
      <form id="formCatatan">
        <label>
          Teks Catatan:<br>
          <textarea name="teks" required rows="3" style="width:100%"></textarea>
        </label><br><br>
        <label>
          Foto:<br>
          <input type="file" name="foto" accept="image/*">
        </label><br><br>
        <label>
          Video:<br>
          <input type="file" name="video" accept="video/*">
        </label><br><br>
        <label>
          Link:<br>
          <input type="url" name="link" style="width:100%">
        </label><br><br>
        <button type="submit">Simpan</button>
        <button type="button" onclick="tutupModal()">Batal</button>
      </form>
    </div>
  </div>

  <!-- Daftar Catatan -->
  <div id="catatanList"></div>

  <script>
    // Hilangkan catatan contoh (jika ada)
    document.getElementById('catatanList').innerHTML = '';

    // Tombol tambah
    document.getElementById('tambahCatatanBtn').onclick = function() {
      document.getElementById('modalCatatan').style.display = 'flex';
    };
    function tutupModal() {
      document.getElementById('modalCatatan').style.display = 'none';
      document.getElementById('formCatatan').reset();
    }

    // Form submit
    document.getElementById('formCatatan').onsubmit = function(e) {
      e.preventDefault();
      const teks = this.teks.value;
      const link = this.link.value;
      const fotoFile = this.foto.files[0];
      const videoFile = this.video.files[0];

      let catatanHTML = `<div class="catatan-item"><div>${teks}</div>`;
      if (link) catatanHTML += `<div><a href="${link}" target="_blank">${link}</a></div>`;
      
      if (fotoFile) {
        const reader = new FileReader();
        reader.onload = function(ev) {
          catatanHTML += `<img src="${ev.target.result}">`;
          if (videoFile) {
            const readerVid = new FileReader();
            readerVid.onload = function(evVid) {
              catatanHTML += `<video controls src="${evVid.target.result}"></video>`;
              catatanHTML += `</div>`;
              document.getElementById('catatanList').innerHTML += catatanHTML;
              tutupModal();
            };
            readerVid.readAsDataURL(videoFile);
          } else {
            catatanHTML += `</div>`;
            document.getElementById('catatanList').innerHTML += catatanHTML;
            tutupModal();
          }
        };
        reader.readAsDataURL(fotoFile);
      } else if (videoFile) {
        const readerVid = new FileReader();
        readerVid.onload = function(evVid) {
          catatanHTML += `<video controls src="${evVid.target.result}"></video>`;
          catatanHTML += `</div>`;
          document.getElementById('catatanList').innerHTML += catatanHTML;
          tutupModal();
        };
        readerVid.readAsDataURL(videoFile);
      } else {
        catatanHTML += `</div>`;
        document.getElementById('catatanList').innerHTML += catatanHTML;
        tutupModal();
      }
    };
  </script>
</body>
</html>
